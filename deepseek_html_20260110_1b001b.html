<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å­¦ä¹ åŠ©æ‰‹æ™ºèƒ½ä½“</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
            background-image: linear-gradient(135deg, #f5f7fa 0%, #e4edf5 100%);
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background-color: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(to right, #4b6cb7, #182848);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
        }
        
        .header-content {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        
        .logo {
            font-size: 42px;
            color: #6ee7b7;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 700;
        }
        
        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
            font-weight: 300;
            margin-top: 10px;
        }
        
        .counter {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.2);
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: 600;
            backdrop-filter: blur(5px);
        }
        
        .main-content {
            display: flex;
            min-height: 600px;
        }
        
        .chat-container {
            flex: 3;
            padding: 25px;
            display: flex;
            flex-direction: column;
        }
        
        .chat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }
        
        .chat-title {
            font-size: 1.5rem;
            color: #2d3748;
            font-weight: 600;
        }
        
        .chat-box {
            flex: 1;
            overflow-y: auto;
            padding: 15px;
            background-color: #f8fafc;
            border-radius: 15px;
            margin-bottom: 20px;
            border: 1px solid #e2e8f0;
            max-height: 400px;
            min-height: 400px;
        }
        
        .message {
            margin-bottom: 20px;
            display: flex;
            align-items: flex-start;
        }
        
        .message.user {
            justify-content: flex-end;
        }
        
        .message-content {
            max-width: 80%;
            padding: 15px 20px;
            border-radius: 18px;
            position: relative;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.03);
        }
        
        .assistant .message-content {
            background-color: #e6f3ff;
            border-top-left-radius: 5px;
            color: #1a365d;
        }
        
        .user .message-content {
            background-color: #4b6cb7;
            color: white;
            border-top-right-radius: 5px;
        }
        
        .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 12px;
            font-size: 18px;
            flex-shrink: 0;
        }
        
        .assistant .avatar {
            background-color: #4b6cb7;
            color: white;
        }
        
        .user .avatar {
            background-color: #10b981;
            color: white;
            margin-right: 0;
            margin-left: 12px;
        }
        
        .input-area {
            display: flex;
            gap: 10px;
        }
        
        input {
            flex: 1;
            padding: 16px 20px;
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            font-size: 1rem;
            transition: all 0.3s;
        }
        
        input:focus {
            outline: none;
            border-color: #4b6cb7;
            box-shadow: 0 0 0 3px rgba(75, 108, 183, 0.2);
        }
        
        button {
            padding: 16px 30px;
            background: linear-gradient(to right, #4b6cb7, #3b5998);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        button:hover {
            background: linear-gradient(to right, #3b5998, #4b6cb7);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(75, 108, 183, 0.3);
        }
        
        .sidebar {
            flex: 1;
            background-color: #f8fafc;
            padding: 25px;
            border-left: 1px solid #e2e8f0;
        }
        
        .sidebar-title {
            font-size: 1.3rem;
            margin-bottom: 20px;
            color: #2d3748;
            font-weight: 600;
        }
        
        .topic-selector {
            margin-bottom: 30px;
        }
        
        .topics {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .topic {
            padding: 10px 15px;
            background-color: white;
            border: 1px solid #e2e8f0;
            border-radius: 10px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .topic:hover {
            background-color: #edf2f7;
        }
        
        .topic.active {
            background-color: #4b6cb7;
            color: white;
            border-color: #4b6cb7;
        }
        
        .conversation-info {
            background-color: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 25px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.03);
        }
        
        .info-title {
            font-size: 1.1rem;
            margin-bottom: 15px;
            color: #2d3748;
        }
        
        .info-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px dashed #e2e8f0;
        }
        
        .info-label {
            color: #718096;
        }
        
        .info-value {
            font-weight: 600;
            color: #4b6cb7;
        }
        
        .controls {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .controls button {
            width: 100%;
            padding: 14px;
            border-radius: 10px;
            font-size: 0.95rem;
        }
        
        .reset-btn {
            background: linear-gradient(to right, #f56565, #e53e3e);
        }
        
        .reset-btn:hover {
            background: linear-gradient(to right, #e53e3e, #f56565);
        }
        
        .instructions {
            font-size: 0.9rem;
            color: #718096;
            line-height: 1.5;
            margin-top: 30px;
            padding: 15px;
            background-color: white;
            border-radius: 10px;
            border-left: 4px solid #4b6cb7;
        }
        
        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }
            
            .sidebar {
                border-left: none;
                border-top: 1px solid #e2e8f0;
            }
            
            h1 {
                font-size: 2rem;
            }
        }
        
        /* åŠ¨ç”»æ•ˆæœ */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .message {
            animation: fadeIn 0.3s ease-out;
        }
        
        /* æ»šåŠ¨æ¡æ ·å¼ */
        .chat-box::-webkit-scrollbar {
            width: 6px;
        }
        
        .chat-box::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        
        .chat-box::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 10px;
        }
        
        .chat-box::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-robot"></i>
                </div>
                <div>
                    <h1>å­¦ä¹ åŠ©æ‰‹æ™ºèƒ½ä½“</h1>
                    <p class="subtitle">æ‚¨çš„ä¸ªäººAIå­¦ä¹ ä¼™ä¼´ï¼Œå¯è¿›è¡Œè‡³å°‘10è½®å¯¹è¯çš„æ™ºèƒ½åŠ©æ‰‹</p>
                </div>
            </div>
            <div class="counter">
                å¯¹è¯è½®æ¬¡: <span id="conversation-count">0</span>/10
            </div>
        </header>
        
        <div class="main-content">
            <div class="chat-container">
                <div class="chat-header">
                    <div class="chat-title">
                        <i class="fas fa-comments"></i> å¯¹è¯åŒº
                    </div>
                    <div id="current-topic">å½“å‰è¯é¢˜: é€šç”¨å­¦ä¹ </div>
                </div>
                
                <div class="chat-box" id="chat-box">
                    <div class="message assistant">
                        <div class="avatar">
                            <i class="fas fa-robot"></i>
                        </div>
                        <div class="message-content">
                            æ‚¨å¥½ï¼æˆ‘æ˜¯æ‚¨çš„å­¦ä¹ åŠ©æ‰‹æ™ºèƒ½ä½“ã€‚æˆ‘å¯ä»¥å¸®åŠ©æ‚¨è§£ç­”å­¦ä¹ ç›¸å…³çš„é—®é¢˜ï¼Œæä¾›å­¦ä¹ å»ºè®®ï¼Œè§£é‡Šæ¦‚å¿µç­‰ã€‚è¯·é—®ä»Šå¤©æ‚¨æƒ³å­¦ä¹ ä»€ä¹ˆï¼Ÿ
                        </div>
                    </div>
                </div>
                
                <div class="input-area">
                    <input type="text" id="user-input" placeholder="è¾“å…¥æ‚¨çš„é—®é¢˜æˆ–æƒ³è®¨è®ºçš„å­¦ä¹ ä¸»é¢˜..." autocomplete="off">
                    <button id="send-btn">
                        <i class="fas fa-paper-plane"></i> å‘é€
                    </button>
                </div>
            </div>
            
            <div class="sidebar">
                <div class="topic-selector">
                    <div class="sidebar-title">
                        <i class="fas fa-book-open"></i> å­¦ä¹ ä¸»é¢˜
                    </div>
                    <div class="topics">
                        <div class="topic active" data-topic="general">é€šç”¨å­¦ä¹ </div>
                        <div class="topic" data-topic="math">æ•°å­¦</div>
                        <div class="topic" data-topic="science">ç§‘å­¦</div>
                        <div class="topic" data-topic="language">è¯­è¨€å­¦ä¹ </div>
                        <div class="topic" data-topic="programming">ç¼–ç¨‹</div>
                        <div class="topic" data-topic="history">å†å²</div>
                    </div>
                </div>
                
                <div class="conversation-info">
                    <div class="info-title">
                        <i class="fas fa-chart-line"></i> å¯¹è¯ä¿¡æ¯
                    </div>
                    <div class="info-item">
                        <span class="info-label">å¯¹è¯è½®æ¬¡:</span>
                        <span class="info-value" id="info-count">0/10</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">å½“å‰ä¸»é¢˜:</span>
                        <span class="info-value" id="info-topic">é€šç”¨å­¦ä¹ </span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">åŠ©æ‰‹çŠ¶æ€:</span>
                        <span class="info-value" id="assistant-status">åœ¨çº¿</span>
                    </div>
                </div>
                
                <div class="controls">
                    <button id="new-topic-btn">
                        <i class="fas fa-plus-circle"></i> æ–°è¯é¢˜
                    </button>
                    <button id="suggest-question-btn">
                        <i class="fas fa-lightbulb"></i> å»ºè®®é—®é¢˜
                    </button>
                    <button class="reset-btn" id="reset-btn">
                        <i class="fas fa-redo"></i> é‡ç½®å¯¹è¯
                    </button>
                </div>
                
                <div class="instructions">
                    <p><strong>ä½¿ç”¨è¯´æ˜:</strong></p>
                    <p>1. é€‰æ‹©å·¦ä¾§å­¦ä¹ ä¸»é¢˜æˆ–ç›´æ¥è¾“å…¥æ‚¨çš„é—®é¢˜</p>
                    <p>2. ç‚¹å‡»"å‘é€"æˆ–æŒ‰Enteré”®ä¸åŠ©æ‰‹å¯¹è¯</p>
                    <p>3. è‡³å°‘å®Œæˆ10è½®å¯¹è¯ä»¥å……åˆ†ä½“éªŒåŠ©æ‰‹åŠŸèƒ½</p>
                    <p>4. ä½¿ç”¨"å»ºè®®é—®é¢˜"æŒ‰é’®è·å–å¯¹è¯çµæ„Ÿ</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // å¯¹è¯æ•°æ®å­˜å‚¨
        let conversationCount = 0;
        let currentTopic = 'general';
        let conversationHistory = [];
        
        // å­¦ä¹ ä¸»é¢˜å¯¹åº”çš„å›ç­”åº“
        const responses = {
            general: [
                "å­¦ä¹ æ˜¯ä¸€ä¸ªæŒç»­çš„è¿‡ç¨‹ï¼Œé‡è¦çš„æ˜¯ä¿æŒå¥½å¥‡å¿ƒå’ŒåšæŒä¸æ‡ˆã€‚",
                "åˆ¶å®šå­¦ä¹ è®¡åˆ’å¯ä»¥å¸®åŠ©æ‚¨æ›´æœ‰æ•ˆåœ°ç®¡ç†æ—¶é—´å’Œèµ„æºã€‚",
                "ä¸»åŠ¨å›å¿†å’Œé—´éš”é‡å¤æ˜¯ä¸¤ç§ç»ç§‘å­¦éªŒè¯çš„æœ‰æ•ˆå­¦ä¹ æ–¹æ³•ã€‚",
                "å­¦ä¹ æ—¶ä¿æŒä¸“æ³¨ï¼Œå‡å°‘å¹²æ‰°ï¼Œå¯ä»¥æé«˜å­¦ä¹ æ•ˆç‡ã€‚",
                "å°†æ–°çŸ¥è¯†ä¸å·²æœ‰çŸ¥è¯†è”ç³»èµ·æ¥ï¼Œæœ‰åŠ©äºåŠ æ·±ç†è§£å’Œè®°å¿†ã€‚",
                "å®šæœŸå¤ä¹ æ˜¯å·©å›ºå­¦ä¹ æˆæœçš„å…³é”®æ­¥éª¤ã€‚",
                "å­¦ä¹ ä¸ä»…ä»…æ˜¯è®°å¿†ï¼Œæ›´é‡è¦çš„æ˜¯ç†è§£å’Œåº”ç”¨ã€‚",
                "å¤šæ ·åŒ–å­¦ä¹ æ–¹æ³•ï¼ˆé˜…è¯»ã€ç»ƒä¹ ã€è®¨è®ºï¼‰å¯ä»¥å¢å¼ºå­¦ä¹ æ•ˆæœã€‚",
                "ä¿æŒç§¯æçš„å­¦ä¹ æ€åº¦å¯¹å­¦ä¹ æˆæœæœ‰é‡è¦å½±å“ã€‚",
                "é€‚å½“ä¼‘æ¯å’Œç¡çœ å¯¹å¤§è„‘å·©å›ºè®°å¿†è‡³å…³é‡è¦ã€‚"
            ],
            math: [
                "æ•°å­¦æ˜¯ç ”ç©¶æ•°é‡ã€ç»“æ„ã€ç©ºé—´å’Œå˜åŒ–çš„å­¦ç§‘ã€‚",
                "ç†è§£æ•°å­¦æ¦‚å¿µæ¯”å•çº¯è®°å¿†å…¬å¼æ›´é‡è¦ã€‚",
                "è§£å†³æ•°å­¦é—®é¢˜é€šå¸¸éœ€è¦é€»è¾‘æ€ç»´å’Œåˆ›é€ æ€§æ€è€ƒã€‚",
                "ä»£æ•°æ˜¯ä½¿ç”¨ç¬¦å·å’Œå­—æ¯è¡¨ç¤ºæ•°å­—å’Œå…³ç³»çš„æ•°å­¦åˆ†æ”¯ã€‚",
                "å‡ ä½•ç ”ç©¶å½¢çŠ¶ã€å¤§å°å’Œç©ºé—´å±æ€§ã€‚",
                "å¾®ç§¯åˆ†æ˜¯ç ”ç©¶å˜åŒ–ç‡å’Œç´¯ç§¯é‡çš„æ•°å­¦åˆ†æ”¯ã€‚",
                "æ•°å­¦è¯æ˜æ˜¯é€šè¿‡é€»è¾‘æ¨ç†éªŒè¯å‘½é¢˜çœŸå®æ€§çš„è¿‡ç¨‹ã€‚",
                "æ¦‚ç‡è®ºç ”ç©¶éšæœºäº‹ä»¶å‘ç”Ÿçš„å¯èƒ½æ€§ã€‚",
                "çº¿æ€§ä»£æ•°ç ”ç©¶å‘é‡ã€å‘é‡ç©ºé—´å’Œçº¿æ€§å˜æ¢ã€‚",
                "æ•°å­¦å»ºæ¨¡æ˜¯ç”¨æ•°å­¦è¯­è¨€æè¿°ç°å®ä¸–ç•Œé—®é¢˜çš„è¿‡ç¨‹ã€‚"
            ],
            science: [
                "ç§‘å­¦æ˜¯é€šè¿‡è§‚å¯Ÿå’Œå®éªŒæ¥ç†è§£è‡ªç„¶ä¸–ç•Œçš„æ–¹æ³•ã€‚",
                "ç§‘å­¦æ–¹æ³•åŒ…æ‹¬æå‡ºé—®é¢˜ã€å½¢æˆå‡è®¾ã€å®éªŒæµ‹è¯•å’Œå¾—å‡ºç»“è®ºã€‚",
                "ç‰©ç†å­¦ç ”ç©¶ç‰©è´¨ã€èƒ½é‡ä»¥åŠå®ƒä»¬ä¹‹é—´çš„ç›¸äº’ä½œç”¨ã€‚",
                "åŒ–å­¦ç ”ç©¶ç‰©è´¨çš„ç»„æˆã€æ€§è´¨å’Œå˜åŒ–ã€‚",
                "ç”Ÿç‰©å­¦ç ”ç©¶ç”Ÿå‘½å’Œç”Ÿç‰©ä½“ã€‚",
                "å¤©æ–‡å­¦ç ”ç©¶å®‡å®™ä¸­çš„å¤©ä½“åŠå…¶ç°è±¡ã€‚",
                "åœ°è´¨å­¦ç ”ç©¶åœ°çƒçš„ç»„æˆã€ç»“æ„å’Œå†å²ã€‚",
                "ç§‘å­¦ç†è®ºæ˜¯åŸºäºåå¤éªŒè¯çš„è¯æ®çš„è§£é‡Šæ¡†æ¶ã€‚",
                "ç§‘å­¦å‘ç°å¸¸å¸¸æ¥è‡ªäºå¥½å¥‡å¿ƒå’ŒåšæŒä¸æ‡ˆçš„æ¢ç´¢ã€‚",
                "ç§‘å­¦ä¸æŠ€æœ¯ç›¸äº’ä¿ƒè¿›ï¼Œæ¨åŠ¨ç¤¾ä¼šè¿›æ­¥ã€‚"
            ],
            language: [
                "è¯­è¨€å­¦ä¹ åŒ…æ‹¬å¬ã€è¯´ã€è¯»ã€å†™å››ä¸ªæ–¹é¢ã€‚",
                "æ²‰æµ¸å¼å­¦ä¹ æ˜¯å¿«é€ŸæŒæ¡è¯­è¨€çš„æœ‰æ•ˆæ–¹æ³•ã€‚",
                "å­¦ä¹ è¯æ±‡æ—¶ï¼Œç»“åˆä¸Šä¸‹æ–‡è®°å¿†æ¯”å•ç‹¬èƒŒè¯µæ›´æœ‰æ•ˆã€‚",
                "è¯­æ³•æ˜¯è¯­è¨€çš„è§„åˆ™ç³»ç»Ÿï¼Œä½†å®é™…ä½¿ç”¨ä¸­çµæ´»æ€§å¾ˆé‡è¦ã€‚",
                "ç»ƒä¹ å£è¯­æ—¶ï¼Œä¸è¦å®³æ€•çŠ¯é”™ï¼Œè¿™æ˜¯å­¦ä¹ è¿‡ç¨‹çš„ä¸€éƒ¨åˆ†ã€‚",
                "é˜…è¯»ç›®æ ‡è¯­è¨€çš„ä¹¦ç±å’Œæ–‡ç« å¯ä»¥æ‰©å±•è¯æ±‡å’Œç†è§£èƒ½åŠ›ã€‚",
                "è§‚çœ‹å¤–è¯­ç”µå½±å’Œç”µè§†å‰§æœ‰åŠ©äºæé«˜å¬åŠ›ç†è§£ã€‚",
                "è¯­è¨€å­¦ä¹ éœ€è¦æŒç»­ç»ƒä¹ ï¼Œæ¯å¤©åšæŒæ¯”å¶å°”é•¿æ—¶é—´å­¦ä¹ æ›´æœ‰æ•ˆã€‚",
                "äº†è§£ç›®æ ‡è¯­è¨€çš„æ–‡åŒ–èƒŒæ™¯æœ‰åŠ©äºæ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨è¯¥è¯­è¨€ã€‚",
                "è¯­è¨€äº¤æ¢æ˜¯ä¸æ¯è¯­è€…ç»ƒä¹ çš„å¥½æ–¹æ³•ã€‚"
            ],
            programming: [
                "ç¼–ç¨‹æ˜¯ç¼–å†™è®¡ç®—æœºç¨‹åºçš„è¿‡ç¨‹ã€‚",
                "ç®—æ³•æ˜¯è§£å†³é—®é¢˜çš„ä¸€ç³»åˆ—æ˜ç¡®æŒ‡ä»¤ã€‚",
                "æ•°æ®ç»“æ„æ˜¯ç»„ç»‡å’Œå­˜å‚¨æ•°æ®çš„æ–¹å¼ã€‚",
                "Pythonå› å…¶ç®€æ´æ˜“è¯»è€Œæˆä¸ºåˆå­¦è€…çš„çƒ­é—¨é€‰æ‹©ã€‚",
                "JavaScriptæ˜¯Webå¼€å‘ä¸­å¿…ä¸å¯å°‘çš„ç¼–ç¨‹è¯­è¨€ã€‚",
                "ç‰ˆæœ¬æ§åˆ¶ï¼ˆå¦‚Gitï¼‰æ˜¯åä½œç¼–ç¨‹çš„é‡è¦å·¥å…·ã€‚",
                "è°ƒè¯•æ˜¯è¯†åˆ«å’Œä¿®å¤ç¨‹åºé”™è¯¯çš„è¿‡ç¨‹ã€‚",
                "é¢å‘å¯¹è±¡ç¼–ç¨‹æ˜¯ä¸€ç§åŸºäºå¯¹è±¡çš„ç¨‹åºè®¾è®¡èŒƒå¼ã€‚",
                "å‡½æ•°å¼ç¼–ç¨‹å¼ºè°ƒä½¿ç”¨çº¯å‡½æ•°å’Œé¿å…çŠ¶æ€å˜åŒ–ã€‚",
                "æŒç»­å­¦ä¹ å’Œå®è·µæ˜¯æˆä¸ºä¼˜ç§€ç¨‹åºå‘˜çš„å…³é”®ã€‚"
            ],
            history: [
                "å†å²ç ”ç©¶è¿‡å»çš„äº‹ä»¶åŠå…¶å¯¹ç°åœ¨å’Œæœªæ¥çš„å½±å“ã€‚",
                "åŸå§‹èµ„æ–™æ˜¯å†å²ç ”ç©¶çš„ç¬¬ä¸€æ‰‹è¯æ®ã€‚",
                "å†å²è§£é‡Šå¯èƒ½å› è§†è§’å’Œè¯æ®çš„ä¸åŒè€Œæœ‰æ‰€å·®å¼‚ã€‚",
                "å¤ä»£æ–‡æ˜å¦‚ç¾ç´¢ä¸è¾¾ç±³äºšã€åŸƒåŠã€å°åº¦å’Œä¸­å›½æ˜¯äººç±»å†å²çš„æ‘‡ç¯®ã€‚",
                "æ–‡è‰ºå¤å…´æ˜¯æ¬§æ´²å†å²ä¸Šè‰ºæœ¯å’ŒçŸ¥è¯†çš„å¤å…´æ—¶æœŸã€‚",
                "å·¥ä¸šé©å‘½æ”¹å˜äº†ç”Ÿäº§æ–¹å¼å’Œç¤¾ä¼šç»“æ„ã€‚",
                "ä¸–ç•Œå¤§æˆ˜å¯¹20ä¸–çºªçš„ä¸–ç•Œæ ¼å±€äº§ç”Ÿäº†æ·±è¿œå½±å“ã€‚",
                "å†å²ç ”ç©¶å¸®åŠ©æˆ‘ä»¬ç†è§£æ–‡åŒ–å·®å¼‚å’Œç¤¾ä¼šå˜è¿ã€‚",
                "å†å²ä¸ä»…æ˜¯æ”¿æ²»å’Œæˆ˜äº‰ï¼Œä¹ŸåŒ…æ‹¬æ™®é€šäººçš„ç”Ÿæ´»å’Œæ–‡åŒ–ã€‚",
                "é€šè¿‡å­¦ä¹ å†å²ï¼Œæˆ‘ä»¬å¯ä»¥ä»è¿‡å»çš„ç»éªŒä¸­å¸å–æ•™è®­ã€‚"
            ]
        };
        
        // åˆå§‹åŒ–å‡½æ•°
        function init() {
            // è®¾ç½®äº‹ä»¶ç›‘å¬å™¨
            document.getElementById('send-btn').addEventListener('click', sendMessage);
            document.getElementById('user-input').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });
            
            document.getElementById('new-topic-btn').addEventListener('click', suggestNewTopic);
            document.getElementById('suggest-question-btn').addEventListener('click', suggestQuestion);
            document.getElementById('reset-btn').addEventListener('click', resetConversation);
            
            // ä¸»é¢˜é€‰æ‹©
            document.querySelectorAll('.topic').forEach(topic => {
                topic.addEventListener('click', function() {
                    // ç§»é™¤æ‰€æœ‰ä¸»é¢˜çš„activeç±»
                    document.querySelectorAll('.topic').forEach(t => t.classList.remove('active'));
                    // ä¸ºå½“å‰ä¸»é¢˜æ·»åŠ activeç±»
                    this.classList.add('active');
                    
                    // æ›´æ–°å½“å‰ä¸»é¢˜
                    currentTopic = this.getAttribute('data-topic');
                    updateTopicDisplay();
                });
            });
            
            // åˆå§‹åŒ–æ˜¾ç¤º
            updateConversationCount();
            updateTopicDisplay();
        }
        
        // å‘é€æ¶ˆæ¯
        function sendMessage() {
            const userInput = document.getElementById('user-input');
            const message = userInput.value.trim();
            
            if (message === '') return;
            
            // æ·»åŠ ç”¨æˆ·æ¶ˆæ¯åˆ°å¯¹è¯
            addMessageToChat('user', message);
            
            // æ·»åŠ åˆ°å¯¹è¯å†å²
            conversationHistory.push({ role: 'user', content: message });
            
            // å¢åŠ å¯¹è¯è®¡æ•°
            conversationCount++;
            updateConversationCount();
            
            // æ¸…ç©ºè¾“å…¥æ¡†
            userInput.value = '';
            
            // æ¨¡æ‹ŸAIæ€è€ƒæ—¶é—´
            setTimeout(() => {
                // ç”ŸæˆAIå›å¤
                const aiResponse = generateAIResponse(currentTopic);
                
                // æ·»åŠ AIæ¶ˆæ¯åˆ°å¯¹è¯
                addMessageToChat('assistant', aiResponse);
                
                // æ·»åŠ åˆ°å¯¹è¯å†å²
                conversationHistory.push({ role: 'assistant', content: aiResponse });
                
                // æ»šåŠ¨åˆ°åº•éƒ¨
                scrollToBottom();
                
                // æ£€æŸ¥æ˜¯å¦è¾¾åˆ°10è½®å¯¹è¯
                if (conversationCount >= 10) {
                    showCompletionMessage();
                }
            }, 800);
        }
        
        // æ·»åŠ æ¶ˆæ¯åˆ°èŠå¤©æ¡†
        function addMessageToChat(sender, content) {
            const chatBox = document.getElementById('chat-box');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}`;
            
            // æ ¹æ®å‘é€è€…è®¾ç½®å¤´åƒ
            let avatarIcon, avatarClass;
            if (sender === 'user') {
                avatarIcon = 'fas fa-user';
                avatarClass = 'user';
            } else {
                avatarIcon = 'fas fa-robot';
                avatarClass = 'assistant';
            }
            
            messageDiv.innerHTML = `
                <div class="avatar ${avatarClass}">
                    <i class="${avatarIcon}"></i>
                </div>
                <div class="message-content">
                    ${content}
                </div>
            `;
            
            chatBox.appendChild(messageDiv);
            
            // æ»šåŠ¨åˆ°åº•éƒ¨
            scrollToBottom();
        }
        
        // ç”ŸæˆAIå›å¤
        function generateAIResponse(topic) {
            // æ ¹æ®ä¸»é¢˜é€‰æ‹©å›å¤
            const topicResponses = responses[topic] || responses.general;
            
            // éšæœºé€‰æ‹©ä¸€ä¸ªå›å¤
            const randomIndex = Math.floor(Math.random() * topicResponses.length);
            let response = topicResponses[randomIndex];
            
            // å¦‚æœæ˜¯ç¬¬10è½®å¯¹è¯ï¼Œæ·»åŠ ç‰¹åˆ«ä¿¡æ¯
            if (conversationCount === 10) {
                response += " æˆ‘ä»¬å·²ç»å®Œæˆäº†10è½®å¯¹è¯ï¼æ„Ÿè°¢æ‚¨ä¸æˆ‘äº¤æµå­¦ä¹ è¯é¢˜ã€‚å¦‚æœæ‚¨æœ‰æ›´å¤šé—®é¢˜ï¼Œè¯·éšæ—¶ç»§ç»­æé—®ã€‚";
            }
            
            // 50%çš„æ¦‚ç‡æ·»åŠ ä¸€ä¸ªè·Ÿè¿›é—®é¢˜
            if (Math.random() > 0.5 && conversationCount < 10) {
                const followUpQuestions = [
                    "æ‚¨å¯¹è¿™ä¸ªè¯é¢˜è¿˜æœ‰ä»€ä¹ˆç–‘é—®å—ï¼Ÿ",
                    "æ‚¨æƒ³è¿›ä¸€æ­¥äº†è§£è¿™ä¸ªæ–¹é¢å—ï¼Ÿ",
                    "éœ€è¦æˆ‘è§£é‡Šå¾—æ›´è¯¦ç»†ä¸€äº›å—ï¼Ÿ",
                    "æ‚¨æ˜¯å¦æƒ³è®¨è®ºè¿™ä¸ªè¯é¢˜çš„å…¶ä»–æ–¹é¢ï¼Ÿ",
                    "æ‚¨å¯¹è¿™ä¸ªè§£é‡Šæœ‰ä»€ä¹ˆçœ‹æ³•ï¼Ÿ"
                ];
                const randomQuestion = followUpQuestions[Math.floor(Math.random() * followUpQuestions.length)];
                response += ` ${randomQuestion}`;
            }
            
            return response;
        }
        
        // å»ºè®®æ–°è¯é¢˜
        function suggestNewTopic() {
            const topics = ['æ•°å­¦', 'ç§‘å­¦', 'è¯­è¨€å­¦ä¹ ', 'ç¼–ç¨‹', 'å†å²'];
            const randomTopic = topics[Math.floor(Math.random() * topics.length)];
            
            addMessageToChat('assistant', `æˆ‘å»ºè®®æˆ‘ä»¬å¯ä»¥è®¨è®ºä¸€ä¸‹${randomTopic}æ–¹é¢çš„å†…å®¹ã€‚æ‚¨å¯¹${randomTopic}æœ‰ä»€ä¹ˆé—®é¢˜æˆ–æƒ³äº†è§£çš„å—ï¼Ÿ`);
            
            // æ›´æ–°ä¸»é¢˜æ˜¾ç¤º
            const topicElements = document.querySelectorAll('.topic');
            topicElements.forEach(topic => {
                if (topic.textContent === randomTopic) {
                    topic.click();
                }
            });
            
            scrollToBottom();
        }
        
        // å»ºè®®é—®é¢˜
        function suggestQuestion() {
            const questionsByTopic = {
                general: [
                    "å¦‚ä½•æé«˜å­¦ä¹ æ•ˆç‡ï¼Ÿ",
                    "æœ‰ä»€ä¹ˆå¥½çš„è®°å¿†æ–¹æ³•æ¨èï¼Ÿ",
                    "å¦‚ä½•åˆ¶å®šæœ‰æ•ˆçš„å­¦ä¹ è®¡åˆ’ï¼Ÿ"
                ],
                math: [
                    "ä»€ä¹ˆæ˜¯å‹¾è‚¡å®šç†ï¼Ÿ",
                    "å¦‚ä½•è§£äºŒæ¬¡æ–¹ç¨‹ï¼Ÿ",
                    "å¾®ç§¯åˆ†çš„åŸºæœ¬æ¦‚å¿µæ˜¯ä»€ä¹ˆï¼Ÿ"
                ],
                science: [
                    "ä»€ä¹ˆæ˜¯ç‰›é¡¿ä¸‰å¤§å®šå¾‹ï¼Ÿ",
                    "åŒ–å­¦å…ƒç´ å‘¨æœŸè¡¨æ˜¯å¦‚ä½•ç»„ç»‡çš„ï¼Ÿ",
                    "DNAå’ŒRNAæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"
                ],
                language: [
                    "å¦‚ä½•å¿«é€Ÿæ‰©å¤§è¯æ±‡é‡ï¼Ÿ",
                    "æœ‰ä»€ä¹ˆæé«˜å¬åŠ›çš„å¥½æ–¹æ³•ï¼Ÿ",
                    "å¦‚ä½•å…‹æœè¯´å¤–è¯­æ—¶çš„ç´§å¼ æ„Ÿï¼Ÿ"
                ],
                programming: [
                    "Pythonå’ŒJavaScriptæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ",
                    "ä»€ä¹ˆæ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Ÿ",
                    "å¦‚ä½•å¼€å§‹å­¦ä¹ ç¼–ç¨‹ï¼Ÿ"
                ],
                history: [
                    "æ–‡è‰ºå¤å…´çš„ä¸»è¦ç‰¹ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ",
                    "å·¥ä¸šé©å‘½å¯¹ç¤¾ä¼šæœ‰ä»€ä¹ˆå½±å“ï¼Ÿ",
                    "ç¬¬äºŒæ¬¡ä¸–ç•Œå¤§æˆ˜çš„ä¸»è¦åŸå› æ˜¯ä»€ä¹ˆï¼Ÿ"
                ]
            };
            
            const questions = questionsByTopic[currentTopic] || questionsByTopic.general;
            const randomQuestion = questions[Math.floor(Math.random() * questions.length)];
            
            // å°†å»ºè®®é—®é¢˜æ”¾å…¥è¾“å…¥æ¡†
            document.getElementById('user-input').value = randomQuestion;
            document.getElementById('user-input').focus();
            
            addMessageToChat('assistant', `æˆ‘ä¸ºæ‚¨å‡†å¤‡äº†ä¸€ä¸ªé—®é¢˜ï¼š"${randomQuestion}"ã€‚æ‚¨å¯ä»¥å‘é€è¿™ä¸ªé—®é¢˜ï¼Œæˆ–è€…ä¿®æ”¹åå‘é€ã€‚`);
            scrollToBottom();
        }
        
        // é‡ç½®å¯¹è¯
        function resetConversation() {
            if (confirm("ç¡®å®šè¦é‡ç½®å¯¹è¯å—ï¼Ÿè¿™å°†æ¸…é™¤æ‰€æœ‰å¯¹è¯å†å²ã€‚")) {
                conversationCount = 0;
                conversationHistory = [];
                
                // æ¸…ç©ºèŠå¤©æ¡†
                const chatBox = document.getElementById('chat-box');
                chatBox.innerHTML = `
                    <div class="message assistant">
                        <div class="avatar">
                            <i class="fas fa-robot"></i>
                        </div>
                        <div class="message-content">
                            æ‚¨å¥½ï¼æˆ‘æ˜¯æ‚¨çš„å­¦ä¹ åŠ©æ‰‹æ™ºèƒ½ä½“ã€‚æˆ‘å¯ä»¥å¸®åŠ©æ‚¨è§£ç­”å­¦ä¹ ç›¸å…³çš„é—®é¢˜ï¼Œæä¾›å­¦ä¹ å»ºè®®ï¼Œè§£é‡Šæ¦‚å¿µç­‰ã€‚è¯·é—®ä»Šå¤©æ‚¨æƒ³å­¦ä¹ ä»€ä¹ˆï¼Ÿ
                        </div>
                    </div>
                `;
                
                // é‡ç½®ä¸»é¢˜
                document.querySelectorAll('.topic').forEach(topic => {
                    topic.classList.remove('active');
                    if (topic.getAttribute('data-topic') === 'general') {
                        topic.classList.add('active');
                        currentTopic = 'general';
                    }
                });
                
                // æ›´æ–°æ˜¾ç¤º
                updateConversationCount();
                updateTopicDisplay();
                
                // é‡ç½®è¾“å…¥æ¡†
                document.getElementById('user-input').value = '';
                
                addMessageToChat('assistant', "å¯¹è¯å·²é‡ç½®ã€‚è¯·é€‰æ‹©ä¸€ä¸ªæ–°çš„å­¦ä¹ ä¸»é¢˜æˆ–ç›´æ¥è¾“å…¥æ‚¨çš„é—®é¢˜ã€‚");
            }
        }
        
        // æ›´æ–°å¯¹è¯è®¡æ•°æ˜¾ç¤º
        function updateConversationCount() {
            document.getElementById('conversation-count').textContent = conversationCount;
            document.getElementById('info-count').textContent = `${conversationCount}/10`;
            
            // æ ¹æ®å¯¹è¯æ¬¡æ•°æ›´æ–°çŠ¶æ€
            let status = "åœ¨çº¿";
            if (conversationCount >= 8) {
                status = "æ¥è¿‘å®Œæˆ";
            } else if (conversationCount >= 5) {
                status = "æ´»è·ƒä¸­";
            }
            document.getElementById('assistant-status').textContent = status;
        }
        
        // æ›´æ–°ä¸»é¢˜æ˜¾ç¤º
        function updateTopicDisplay() {
            const topicNames = {
                general: "é€šç”¨å­¦ä¹ ",
                math: "æ•°å­¦",
                science: "ç§‘å­¦",
                language: "è¯­è¨€å­¦ä¹ ",
                programming: "ç¼–ç¨‹",
                history: "å†å²"
            };
            
            const topicName = topicNames[currentTopic] || "é€šç”¨å­¦ä¹ ";
            document.getElementById('current-topic').textContent = `å½“å‰è¯é¢˜: ${topicName}`;
            document.getElementById('info-topic').textContent = topicName;
        }
        
        // æ˜¾ç¤ºå®Œæˆæ¶ˆæ¯
        function showCompletionMessage() {
            setTimeout(() => {
                addMessageToChat('assistant', "ğŸ‰ æ­å–œï¼æ‚¨å·²ç»å®Œæˆäº†10è½®å¯¹è¯ã€‚æ‚¨å·²ç»å……åˆ†ä½“éªŒäº†å­¦ä¹ åŠ©æ‰‹çš„åŠŸèƒ½ã€‚å¦‚æœæ‚¨è¿˜æœ‰æ›´å¤šé—®é¢˜ï¼Œå¯ä»¥ç»§ç»­æé—®ï¼Œæˆ–è€…ç‚¹å‡»é‡ç½®æŒ‰é’®å¼€å§‹æ–°çš„å¯¹è¯ã€‚");
                scrollToBottom();
            }, 1000);
        }
        
        // æ»šåŠ¨åˆ°åº•éƒ¨
        function scrollToBottom() {
            const chatBox = document.getElementById('chat-box');
            chatBox.scrollTop = chatBox.scrollHeight;
        }
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>